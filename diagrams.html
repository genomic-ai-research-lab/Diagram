<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LLM-Driven ARG Framework - Diagrams (Chapter 3)</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #1a1a1a;
            background: white;
            line-height: 1.6;
            padding: 40px;
            max-width: 1000px;
            margin: 0 auto;
        }

        .document-title {
            text-align: center;
            margin-bottom: 40px;
            border-bottom: 2px solid #1a1a1a;
            padding-bottom: 20px;
        }

        .document-title h1 {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 5px;
            letter-spacing: 0.5px;
        }

        .document-title p {
            font-size: 13px;
            color: #555;
        }

        .figure {
            page-break-inside: avoid;
            margin-bottom: 50px;
            border: 1px solid #e0e0e0;
            padding: 30px;
            background: #fafafa;
        }

        .figure-title {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: #1a1a1a;
            border-bottom: 1px solid #d0d0d0;
            padding-bottom: 10px;
        }

        .figure-content {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 300px;
            background: white;
            border: 1px solid #d0d0d0;
            padding: 20px;
        }

        svg {
            max-width: 100%;
            height: auto;
        }

        /* SVG Styling */
        .process-box {
            fill: white;
            stroke: #1a1a1a;
            stroke-width: 1.5;
        }

        .entity-box {
            fill: #f5f5f5;
            stroke: #1a1a1a;
            stroke-width: 1.5;
        }

        .central-circle {
            fill: #ffffff;
            stroke: #1a1a1a;
            stroke-width: 2;
        }

        .arrow {
            stroke: #1a1a1a;
            stroke-width: 1.5;
            fill: none;
            marker-end: url(#arrowhead);
        }

        .arrow-label {
            font-size: 11px;
            font-weight: 500;
            fill: #1a1a1a;
        }

        .process-label {
            font-size: 12px;
            font-weight: 600;
            fill: #1a1a1a;
            text-anchor: middle;
        }

        .entity-label {
            font-size: 12px;
            font-weight: 600;
            fill: #1a1a1a;
            text-anchor: middle;
        }

        .io-label {
            font-size: 10px;
            fill: #1a1a1a;
            text-anchor: middle;
        }

        /* UI Wireframe Styling */
        .wireframe {
            display: flex;
            height: 400px;
            gap: 15px;
            background: white;
            padding: 15px;
            border: 1px solid #d0d0d0;
        }

        .sidebar {
            width: 180px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .sidebar-item {
            padding: 12px;
            border: 1px solid #d0d0d0;
            background: #f5f5f5;
            font-size: 11px;
            font-weight: 500;
            text-align: center;
        }

        .sidebar-item.button {
            background: #e8e8e8;
            cursor: pointer;
            border: 1px solid #999;
        }

        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .results-table {
            flex: 1;
            border: 1px solid #d0d0d0;
            background: white;
        }

        .table-header {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr;
            gap: 10px;
            padding: 8px;
            background: #e8e8e8;
            font-size: 10px;
            font-weight: 600;
            border-bottom: 1px solid #d0d0d0;
        }

        .table-row {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr;
            gap: 10px;
            padding: 8px;
            border-bottom: 1px solid #e0e0e0;
            font-size: 10px;
        }

        .detail-panel {
            flex: 0.8;
            border: 1px solid #d0d0d0;
            padding: 10px;
            background: #fafafa;
            font-size: 10px;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .detail-title {
            font-weight: 600;
            border-bottom: 1px solid #d0d0d0;
            padding-bottom: 5px;
        }

        .detail-text {
            flex: 1;
            background: white;
            padding: 8px;
            border: 1px solid #d0d0d0;
            overflow: hidden;
            font-size: 9px;
            line-height: 1.4;
        }

        .badge {
            display: inline-block;
            padding: 4px 8px;
            border: 1px solid #1a1a1a;
            font-size: 9px;
            font-weight: 600;
            text-align: center;
        }

        /* Gantt Chart Styling */
        .gantt-container {
            overflow-x: auto;
            background: white;
            padding: 10px;
            border: 1px solid #d0d0d0;
        }

        .gantt-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 11px;
        }

        .gantt-table th,
        .gantt-table td {
            border: 1px solid #d0d0d0;
            padding: 8px;
            text-align: center;
        }

        .gantt-table th {
            background: #e8e8e8;
            font-weight: 600;
            text-transform: uppercase;
            font-size: 10px;
        }

        .gantt-table td {
            background: #fafafa;
        }

        .task-name {
            text-align: left;
            font-weight: 500;
            width: 180px;
        }

        .gantt-bar {
            background: #1a1a1a;
            height: 20px;
            border: 1px solid #1a1a1a;
        }

        /* Print Styles */
        @media print {
            body {
                padding: 20px;
                max-width: 100%;
            }

            .figure {
                page-break-inside: avoid;
                box-shadow: none;
                border: 1px solid #ccc;
            }

            .document-title {
                border-bottom: 1px solid #1a1a1a;
            }
        }

        /* Utility Classes */
        .header {
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 10px;
            color: #1a1a1a;
        }

        .subheader {
            font-size: 11px;
            font-weight: 500;
            color: #555;
            margin-bottom: 8px;
        }
    </style>
</head>
<body>
    <!-- Document Header -->
    <div class="document-title">
        <h1>LLM-Driven ARG Framework</h1>
        <p>Chapter 3: System Architecture & Design Diagrams</p>
    </div>

    <!-- Figure 3.1: Context Diagram -->
    <div class="figure">
        <div class="figure-title">Figure 3.1: Context Diagram</div>
        <div class="figure-content">
            <svg width="750" height="420" viewBox="0 0 750 420">
                <!-- Arrow marker definition -->
                <defs>
                    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <polygon points="0 0, 10 3, 0 6" fill="#1a1a1a"/>
                    </marker>
                </defs>

                <!-- Central Circle -->
                <circle cx="350" cy="210" r="75" class="central-circle"/>
                <text x="350" y="195" class="process-label" text-anchor="middle">LLM-Driven</text>
                <text x="350" y="212" class="process-label" text-anchor="middle">ARG</text>
                <text x="350" y="229" class="process-label" text-anchor="middle">Framework</text>

                <!-- External Entities -->
                <!-- User (Researcher) - Left -->
                <rect x="40" y="170" width="110" height="80" rx="5" class="entity-box"/>
                <text x="95" y="205" class="entity-label" text-anchor="middle">User</text>
                <text x="95" y="222" class="entity-label" text-anchor="middle">(Researcher)</text>

                <!-- CARD Database - Top Right -->
                <rect x="580" y="50" width="130" height="70" rx="5" class="entity-box"/>
                <text x="645" y="82" class="entity-label" text-anchor="middle">CARD</text>
                <text x="645" y="99" class="entity-label" text-anchor="middle">Database</text>

                <!-- LLM Provider - Bottom Right -->
                <rect x="580" y="300" width="130" height="70" rx="5" class="entity-box"/>
                <text x="645" y="332" class="entity-label" text-anchor="middle">LLM</text>
                <text x="645" y="349" class="entity-label" text-anchor="middle">Provider</text>

                <!-- ========== DATA FLOWS ========== -->
                
                <!-- User to System: Genomic FASTA File (circle edge at x=275, y=200) -->
                <path d="M 150 195 L 276 200" class="arrow"/>
                <text x="212" y="182" class="arrow-label" text-anchor="middle">Genomic FASTA File</text>

                <!-- System to User: Analysis Report (circle edge at x=275, y=220) -->
                <path d="M 276 220 L 150 225" class="arrow"/>
                <text x="212" y="248" class="arrow-label" text-anchor="middle">Analysis Report</text>

                <!-- System to CARD Database: Gene ID Query (from circle top-right edge) -->
                <path d="M 403 150 L 500 85 L 580 85" class="arrow"/>
                <text x="510" y="70" class="arrow-label" text-anchor="middle">Gene ID Query</text>

                <!-- CARD Database to System: Gene Description (to circle top-right edge) -->
                <path d="M 580 115 L 510 115 L 410 162" class="arrow"/>
                <text x="550" y="140" class="arrow-label" text-anchor="middle">Gene Description</text>

                <!-- System to LLM Provider: Prompt (from circle bottom-right edge) -->
                <path d="M 410 258 L 510 320 L 580 320" class="arrow"/>
                <text x="530" y="265" class="arrow-label" text-anchor="middle">Prompt</text>
                <text x="530" y="280" class="arrow-label" text-anchor="middle">(Alignment + Context)</text>

                <!-- LLM Provider to System: Validation & Reasoning (to circle bottom-right edge) -->
                <path d="M 580 350 L 510 350 L 403 270" class="arrow"/>
                <text x="505" y="375" class="arrow-label" text-anchor="middle">Validation & Reasoning</text>
            </svg>
        </div>
    </div>

    <!-- Figure 3.2: Data Flow Diagram (Level 1) -->
    <div class="figure">
        <div class="figure-title">Figure 3.2: Data Flow Diagram (Level 1)</div>
        <div class="figure-content">
            <svg width="100%" height="480" viewBox="0 0 900 480" style="min-height: 480px;">
                <defs>
                    <marker id="arrowhead2" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <polygon points="0 0, 10 3, 0 6" fill="#1a1a1a"/>
                    </marker>
                </defs>

                <!-- ========== EXTERNAL ENTITY: User (Researcher) ========== -->
                <rect x="40" y="175" width="100" height="60" rx="0" fill="none" stroke="#1a1a1a" stroke-width="2"/>
                <text x="90" y="200" font-size="12" font-weight="700" text-anchor="middle" fill="#1a1a1a">User</text>
                <text x="90" y="218" font-size="10" text-anchor="middle" fill="#555">(Researcher)</text>

                <!-- ========== DATA STORE: D1 CARD Database (centered above process 2.0) ========== -->
                <line x1="310" y1="50" x2="310" y2="90" stroke="#1a1a1a" stroke-width="1.5"/>
                <line x1="310" y1="50" x2="470" y2="50" stroke="#1a1a1a" stroke-width="1.5"/>
                <line x1="310" y1="90" x2="470" y2="90" stroke="#1a1a1a" stroke-width="1.5"/>
                <text x="320" y="75" font-size="10" font-weight="600" fill="#1a1a1a">D1</text>
                <line x1="340" y1="50" x2="340" y2="90" stroke="#1a1a1a" stroke-width="1"/>
                <text x="405" y="75" font-size="11" font-weight="600" text-anchor="middle" fill="#1a1a1a">CARD Database</text>

                <!-- ========== DATA STORE: D2 LLM Provider (centered above process 4.0) ========== -->
                <line x1="615" y1="50" x2="615" y2="90" stroke="#1a1a1a" stroke-width="1.5"/>
                <line x1="615" y1="50" x2="785" y2="50" stroke="#1a1a1a" stroke-width="1.5"/>
                <line x1="615" y1="90" x2="785" y2="90" stroke="#1a1a1a" stroke-width="1.5"/>
                <text x="625" y="75" font-size="10" font-weight="600" fill="#1a1a1a">D2</text>
                <line x1="645" y1="50" x2="645" y2="90" stroke="#1a1a1a" stroke-width="1"/>
                <text x="715" y="75" font-size="11" font-weight="600" text-anchor="middle" fill="#1a1a1a">LLM Provider (API)</text>

                <!-- ========== PROCESSES ========== -->
                
                <!-- Process 1.0: Sequence Alignment -->
                <circle cx="220" cy="205" r="45" fill="white" stroke="#1a1a1a" stroke-width="2"/>
                <text x="220" y="195" font-size="10" font-weight="700" text-anchor="middle" fill="#1a1a1a">1.0</text>
                <text x="220" y="210" font-size="10" font-weight="600" text-anchor="middle" fill="#1a1a1a">Sequence</text>
                <text x="220" y="223" font-size="10" font-weight="600" text-anchor="middle" fill="#1a1a1a">Alignment</text>

                <!-- Process 2.0: Context Retrieval -->
                <circle cx="390" cy="205" r="45" fill="white" stroke="#1a1a1a" stroke-width="2"/>
                <text x="390" y="195" font-size="10" font-weight="700" text-anchor="middle" fill="#1a1a1a">2.0</text>
                <text x="390" y="210" font-size="10" font-weight="600" text-anchor="middle" fill="#1a1a1a">Context</text>
                <text x="390" y="223" font-size="10" font-weight="600" text-anchor="middle" fill="#1a1a1a">Retrieval</text>

                <!-- Process 3.0: Prompt Engineering -->
                <circle cx="550" cy="205" r="45" fill="white" stroke="#1a1a1a" stroke-width="2"/>
                <text x="550" y="195" font-size="10" font-weight="700" text-anchor="middle" fill="#1a1a1a">3.0</text>
                <text x="550" y="210" font-size="10" font-weight="600" text-anchor="middle" fill="#1a1a1a">Prompt</text>
                <text x="550" y="223" font-size="10" font-weight="600" text-anchor="middle" fill="#1a1a1a">Engineering</text>

                <!-- Process 4.0: LLM Reasoning -->
                <circle cx="700" cy="205" r="45" fill="white" stroke="#1a1a1a" stroke-width="2"/>
                <text x="700" y="195" font-size="10" font-weight="700" text-anchor="middle" fill="#1a1a1a">4.0</text>
                <text x="700" y="210" font-size="10" font-weight="600" text-anchor="middle" fill="#1a1a1a">LLM</text>
                <text x="700" y="223" font-size="10" font-weight="600" text-anchor="middle" fill="#1a1a1a">Reasoning</text>

                <!-- Process 5.0: Report Generation -->
                <circle cx="550" cy="350" r="45" fill="white" stroke="#1a1a1a" stroke-width="2"/>
                <text x="550" y="340" font-size="10" font-weight="700" text-anchor="middle" fill="#1a1a1a">5.0</text>
                <text x="550" y="355" font-size="10" font-weight="600" text-anchor="middle" fill="#1a1a1a">Report</text>
                <text x="550" y="368" font-size="10" font-weight="600" text-anchor="middle" fill="#1a1a1a">Generation</text>

                <!-- ========== DATA FLOWS ========== -->
                
                <!-- User â†’ Process 1.0: FASTA File -->
                <path d="M 140 195 L 175 195" stroke="#1a1a1a" stroke-width="1.5" fill="none" marker-end="url(#arrowhead2)"/>
                <text x="157" y="185" font-size="9" text-anchor="middle" fill="#1a1a1a">FASTA</text>

                <!-- Process 1.0 â†’ Process 2.0: Candidate Hits -->
                <path d="M 265 205 L 345 205" stroke="#1a1a1a" stroke-width="1.5" fill="none" marker-end="url(#arrowhead2)"/>
                <text x="305" y="195" font-size="9" text-anchor="middle" fill="#1a1a1a">Candidate Hits</text>

                <!-- Process 2.0 â†” D1: Query/Response -->
                <path d="M 370 160 L 370 90" stroke="#1a1a1a" stroke-width="1.5" fill="none" marker-end="url(#arrowhead2)"/>
                <text x="355" y="125" font-size="9" text-anchor="end" fill="#1a1a1a">Query</text>
                <path d="M 410 90 L 410 160" stroke="#1a1a1a" stroke-width="1.5" fill="none" marker-end="url(#arrowhead2)"/>
                <text x="425" y="125" font-size="9" text-anchor="start" fill="#1a1a1a">Gene Info</text>

                <!-- Process 2.0 â†’ Process 3.0: Enriched Context -->
                <path d="M 435 205 L 505 205" stroke="#1a1a1a" stroke-width="1.5" fill="none" marker-end="url(#arrowhead2)"/>
                <text x="470" y="185" font-size="9" text-anchor="middle" fill="#1a1a1a">Enriched</text>
                <text x="470" y="196" font-size="9" text-anchor="middle" fill="#1a1a1a">Context</text>

                <!-- Process 3.0 â†’ Process 4.0: Formatted Prompt -->
                <path d="M 595 205 L 655 205" stroke="#1a1a1a" stroke-width="1.5" fill="none" marker-end="url(#arrowhead2)"/>
                <text x="625" y="195" font-size="9" text-anchor="middle" fill="#1a1a1a">Prompt</text>

                <!-- Process 4.0 â†” D2: Request/Response -->
                <path d="M 680 160 L 680 90" stroke="#1a1a1a" stroke-width="1.5" fill="none" marker-end="url(#arrowhead2)"/>
                <text x="665" y="125" font-size="9" text-anchor="end" fill="#1a1a1a">Request</text>
                <path d="M 720 90 L 720 160" stroke="#1a1a1a" stroke-width="1.5" fill="none" marker-end="url(#arrowhead2)"/>
                <text x="735" y="125" font-size="9" text-anchor="start" fill="#1a1a1a">Response</text>

                <!-- Process 4.0 â†’ Process 5.0: Validation Result -->
                <path d="M 700 250 L 700 290 L 595 330" stroke="#1a1a1a" stroke-width="1.5" fill="none" marker-end="url(#arrowhead2)"/>
                <text x="720" y="275" font-size="9" text-anchor="start" fill="#1a1a1a">Validation Result</text>

                <!-- Process 5.0 â†’ User: Analysis Report -->
                <path d="M 505 350 L 90 350 L 90 235" stroke="#1a1a1a" stroke-width="1.5" fill="none" marker-end="url(#arrowhead2)"/>
                <text x="290" y="340" font-size="9" text-anchor="middle" fill="#1a1a1a">Analysis Report</text>

                <!-- ========== LEGEND ========== -->
                <line x1="40" y1="430" x2="860" y2="430" stroke="#ccc" stroke-width="1"/>
                <text x="40" y="455" font-size="11" font-weight="700" fill="#000">Legend:</text>
                
                <!-- External Entity -->
                <rect x="110" y="442" width="28" height="18" fill="none" stroke="#1a1a1a" stroke-width="1.5"/>
                <text x="148" y="456" font-size="10" fill="#1a1a1a">External Entity</text>

                <!-- Process -->
                <circle cx="275" cy="451" r="10" fill="white" stroke="#1a1a1a" stroke-width="1.5"/>
                <text x="295" y="456" font-size="10" fill="#1a1a1a">Process</text>

                <!-- Data Store -->
                <line x1="380" y1="442" x2="380" y2="460" stroke="#1a1a1a" stroke-width="1"/>
                <line x1="380" y1="442" x2="425" y2="442" stroke="#1a1a1a" stroke-width="1"/>
                <line x1="380" y1="460" x2="425" y2="460" stroke="#1a1a1a" stroke-width="1"/>
                <text x="435" y="456" font-size="10" fill="#1a1a1a">Data Store</text>

                <!-- Data Flow -->
                <path d="M 530 451 L 575 451" stroke="#1a1a1a" stroke-width="1.5" fill="none" marker-end="url(#arrowhead2)"/>
                <text x="585" y="456" font-size="10" fill="#1a1a1a">Data Flow</text>
            </svg>
        </div>
    </div>

    <!-- Figure 3.3: User Interface Wireframe -->
    <div class="figure">
        <div class="figure-title">Figure 3.3: User Interface Wireframe</div>
        <div style="background: white; border: 1px solid #d0d0d0; padding: 0; margin: 0;">
            <!-- Header -->
            <div style="padding: 15px; border-bottom: 2px solid #1a1a1a; background: #e8e8e8;">
                <div class="header">Genomic ARG Validator</div>
            </div>

            <!-- Main Wireframe -->
            <div class="wireframe">
                <!-- Left Sidebar -->
                <div class="sidebar">
                    <div class="subheader">Control Panel</div>
                    <div class="sidebar-item">
                        ðŸ“¤ Upload FASTA
                    </div>
                    <div class="sidebar-item button">
                        â–¶ Process
                    </div>
                    <div class="sidebar-item">
                        âŸ³ Retrieving Context...
                    </div>
                </div>

                <!-- Main Content -->
                <div class="main-content">
                    <!-- Results Table -->
                    <div class="results-table">
                        <div class="table-header">
                            <div>Gene Name</div>
                            <div>Identity %</div>
                            <div>E-Value</div>
                            <div>Prediction</div>
                        </div>
                        <div class="table-row">
                            <div>tet(A)</div>
                            <div>94.5%</div>
                            <div>1e-120</div>
                            <div>Hit</div>
                        </div>
                        <div class="table-row">
                            <div>blaCTX-M</div>
                            <div>87.2%</div>
                            <div>2e-95</div>
                            <div>Hit</div>
                        </div>
                        <div class="table-row">
                            <div>aac(6')-I</div>
                            <div>45.1%</div>
                            <div>8e-15</div>
                            <div>False</div>
                        </div>
                    </div>

                    <!-- Detail Panel -->
                    <div class="detail-panel">
                        <div class="detail-title">Analysis for Gene: tet(A)</div>
                        <div class="detail-text">
                            <strong>LLM Explanation:</strong> This gene confers tetracycline resistance via efflux pumps. High homology with validated CARD entry. Strong alignment statistics suggest functional hit.
                        </div>
                        <div style="display: flex; gap: 10px;">
                            <div class="badge">âœ“ Valid Hit</div>
                            <div style="font-size: 9px; color: #555;">Confidence: 98%</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Figure 3.4: Project Plan (Gantt Chart) -->
    <div class="figure">
        <div class="figure-title">Figure 3.4: Project Plan (Gantt Chart)</div>
        <div class="gantt-container">
            <table class="gantt-table">
                <thead>
                    <tr>
                        <th class="task-name">Task</th>
                        <th>Jul</th>
                        <th>Aug</th>
                        <th>Sep</th>
                        <th>Oct</th>
                        <th>Nov</th>
                        <th>Dec</th>
                        <th>Jan</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="task-name">1. Literature Review</td>
                        <td colspan="2" style="padding: 0;"><div class="gantt-bar"></div></td>
                        <td colspan="5" style="background: #fafafa;"></td>
                    </tr>
                    <tr>
                        <td class="task-name">2. Requirement Analysis</td>
                        <td style="background: #fafafa;"></td>
                        <td style="padding: 0;"><div class="gantt-bar"></div></td>
                        <td colspan="5" style="background: #fafafa;"></td>
                    </tr>
                    <tr>
                        <td class="task-name">3. Prototype Implementation</td>
                        <td colspan="2" style="background: #fafafa;"></td>
                        <td colspan="2" style="padding: 0;"><div class="gantt-bar"></div></td>
                        <td colspan="3" style="background: #fafafa;"></td>
                    </tr>
                    <tr>
                        <td class="task-name">4. RAG Integration</td>
                        <td colspan="3" style="background: #fafafa;"></td>
                        <td colspan="2" style="padding: 0;"><div class="gantt-bar"></div></td>
                        <td colspan="2" style="background: #fafafa;"></td>
                    </tr>
                    <tr>
                        <td class="task-name">5. Testing & Validation</td>
                        <td colspan="4" style="background: #fafafa;"></td>
                        <td colspan="2" style="padding: 0;"><div class="gantt-bar"></div></td>
                        <td style="background: #fafafa;"></td>
                    </tr>
                    <tr>
                        <td class="task-name">6. Final Report Writing</td>
                        <td colspan="5" style="background: #fafafa;"></td>
                        <td colspan="2" style="padding: 0;"><div class="gantt-bar"></div></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Figure 3.5: System Architecture Diagram -->
    <div class="figure">
        <div class="figure-title">Figure 3.5: High-Level System Architecture Diagram</div>
        <div class="figure-content">
            <svg width="100%" height="850" viewBox="0 0 1400 820" style="min-height: 700px;">
                <defs>
                    <marker id="arrowSolid5" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <polygon points="0 0, 10 3, 0 6" fill="#1a1a1a"/>
                    </marker>
                    <marker id="arrowDashed5" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <polygon points="0 0, 10 3, 0 6" fill="#666"/>
                    </marker>
                </defs>

                <!-- ========== CLIENT LAYER ========== -->
                <text x="60" y="45" font-size="14" font-weight="700" fill="#000">CLIENT LAYER</text>
                
                <!-- Web User Interface Box -->
                <rect x="350" y="65" width="300" height="90" rx="5" fill="white" stroke="#1a1a1a" stroke-width="2"/>
                <text x="500" y="100" font-size="13" font-weight="600" text-anchor="middle" fill="#1a1a1a">Web User Interface</text>
                <text x="500" y="120" font-size="10" text-anchor="middle" fill="#555">(FASTA Upload / Progress Display /</text>
                <text x="500" y="135" font-size="10" text-anchor="middle" fill="#555">Results Table / Explanation Panel)</text>

                <!-- ========== APPLICATION / BACKEND LAYER ========== -->
                <text x="30" y="410" font-size="13" font-weight="700" fill="#000" transform="rotate(-90, 30, 410)">APPLICATION / BACKEND LAYER</text>
                
                <!-- Backend Controller -->
                <rect x="60" y="260" width="150" height="100" rx="5" fill="white" stroke="#1a1a1a" stroke-width="2.5"/>
                <text x="135" y="300" font-size="12" font-weight="700" text-anchor="middle" fill="#1a1a1a">Backend</text>
                <text x="135" y="320" font-size="12" font-weight="700" text-anchor="middle" fill="#1a1a1a">Controller</text>
                <text x="135" y="340" font-size="9" text-anchor="middle" fill="#555">(Python)</text>

                <!-- Sequence Alignment Module -->
                <rect x="260" y="260" width="150" height="100" rx="5" fill="white" stroke="#1a1a1a" stroke-width="1.5"/>
                <text x="335" y="295" font-size="11" font-weight="600" text-anchor="middle" fill="#1a1a1a">Sequence</text>
                <text x="335" y="313" font-size="11" font-weight="600" text-anchor="middle" fill="#1a1a1a">Alignment</text>
                <text x="335" y="335" font-size="9" text-anchor="middle" fill="#555">(DIAMOND / BLAST)</text>

                <!-- RAG / CARD Retrieval Module -->
                <rect x="460" y="260" width="150" height="100" rx="5" fill="white" stroke="#1a1a1a" stroke-width="1.5"/>
                <text x="535" y="295" font-size="11" font-weight="600" text-anchor="middle" fill="#1a1a1a">RAG / CARD</text>
                <text x="535" y="313" font-size="11" font-weight="600" text-anchor="middle" fill="#1a1a1a">Retrieval</text>
                <text x="535" y="335" font-size="9" text-anchor="middle" fill="#555">(ARO Lookup)</text>

                <!-- Prompt Engineering Module -->
                <rect x="660" y="260" width="150" height="100" rx="5" fill="white" stroke="#1a1a1a" stroke-width="1.5"/>
                <text x="735" y="295" font-size="11" font-weight="600" text-anchor="middle" fill="#1a1a1a">Prompt</text>
                <text x="735" y="313" font-size="11" font-weight="600" text-anchor="middle" fill="#1a1a1a">Engineering</text>
                <text x="735" y="335" font-size="9" text-anchor="middle" fill="#555">(Combine Context)</text>

                <!-- LLM Reasoning Engine -->
                <rect x="260" y="460" width="150" height="100" rx="5" fill="white" stroke="#1a1a1a" stroke-width="1.5"/>
                <text x="335" y="495" font-size="11" font-weight="600" text-anchor="middle" fill="#1a1a1a">LLM Reasoning</text>
                <text x="335" y="513" font-size="11" font-weight="600" text-anchor="middle" fill="#1a1a1a">Engine</text>
                <text x="335" y="538" font-size="9" text-anchor="middle" fill="#555">(Send to LLM API)</text>

                <!-- Report Generation Module -->
                <rect x="460" y="460" width="150" height="100" rx="5" fill="white" stroke="#1a1a1a" stroke-width="1.5"/>
                <text x="535" y="495" font-size="11" font-weight="600" text-anchor="middle" fill="#1a1a1a">Report</text>
                <text x="535" y="513" font-size="11" font-weight="600" text-anchor="middle" fill="#1a1a1a">Generation</text>
                <text x="535" y="538" font-size="9" text-anchor="middle" fill="#555">(JSON + NL Report)</text>

                <!-- ========== EXTERNAL SYSTEMS ========== -->
                <text x="1280" y="450" font-size="13" font-weight="700" fill="#000" transform="rotate(-90, 1280, 450)">EXTERNAL SYSTEMS</text>

                <!-- CARD Database -->
                <rect x="1050" y="260" width="200" height="100" rx="5" fill="#a0a0a0" stroke="#1a1a1a" stroke-width="2.5"/>
                <text x="1150" y="295" font-size="12" font-weight="700" text-anchor="middle" fill="#1a1a1a">CARD Database</text>
                <text x="1150" y="318" font-size="10" text-anchor="middle" fill="#333">(Ontology &amp; Resistance</text>
                <text x="1150" y="333" font-size="10" text-anchor="middle" fill="#333">Metadata)</text>

                <!-- LLM Provider -->
                <rect x="1050" y="460" width="200" height="100" rx="5" fill="#a0a0a0" stroke="#1a1a1a" stroke-width="2.5"/>
                <text x="1150" y="495" font-size="12" font-weight="700" text-anchor="middle" fill="#1a1a1a">LLM Provider (API)</text>
                <text x="1150" y="518" font-size="10" text-anchor="middle" fill="#333">(Reasoning &amp;</text>
                <text x="1150" y="533" font-size="10" text-anchor="middle" fill="#333">Validation Service)</text>

                <!-- ========== PRIMARY DATA FLOWS (SOLID ARROWS) ========== -->
                
                <!-- 1. Web UI â†’ Backend Controller: FASTA File -->
                <path d="M 475 155 L 135 260" stroke="#1a1a1a" stroke-width="2.5" fill="none" marker-end="url(#arrowSolid5)"/>
                <text x="275" y="190" font-size="11" font-weight="600" fill="#1a1a1a">FASTA File</text>

                <!-- 2. Backend â†’ Alignment: Start -->
                <path d="M 210 310 L 260 310" stroke="#1a1a1a" stroke-width="2" fill="none" marker-end="url(#arrowSolid5)"/>
                <text x="225" y="300" font-size="10" fill="#1a1a1a">Start</text>

                <!-- 3. Alignment â†’ RAG: Candidate Hits -->
                <path d="M 410 310 L 460 310" stroke="#1a1a1a" stroke-width="2" fill="none" marker-end="url(#arrowSolid5)"/>
                <text x="435" y="280" font-size="9" text-anchor="middle" fill="#1a1a1a">Candidate</text>
                <text x="435" y="292" font-size="9" text-anchor="middle" fill="#1a1a1a">Hits</text>

                <!-- 4. RAG â†’ Prompt Engineering: Enriched Context -->
                <path d="M 610 310 L 660 310" stroke="#1a1a1a" stroke-width="2" fill="none" marker-end="url(#arrowSolid5)"/>
                <text x="635" y="280" font-size="9" text-anchor="middle" fill="#1a1a1a">Enriched</text>
                <text x="635" y="292" font-size="9" text-anchor="middle" fill="#1a1a1a">Context</text>

                <!-- 5. Prompt Engineering â†’ LLM Reasoning: Prompt -->
                <path d="M 735 360 L 735 410 L 335 410 L 335 460" stroke="#1a1a1a" stroke-width="2" fill="none" marker-end="url(#arrowSolid5)"/>
                <text x="555" y="402" font-size="11" fill="#1a1a1a">Prompt</text>

                <!-- 6. LLM Reasoning â†’ Report Generation: Validation Result -->
                <path d="M 410 510 L 460 510" stroke="#1a1a1a" stroke-width="2" fill="none" marker-end="url(#arrowSolid5)"/>
                <text x="435" y="480" font-size="9" text-anchor="middle" fill="#1a1a1a">Validation</text>
                <text x="435" y="492" font-size="9" text-anchor="middle" fill="#1a1a1a">Result</text>

                <!-- 7. Report Generation â†’ Web UI: Final Report -->
                <path d="M 540 560 L 540 600 L 480 600 L 480 155" stroke="#1a1a1a" stroke-width="2.5" fill="none" marker-end="url(#arrowSolid5)"/>
                <text x="510" y="618" font-size="11" font-weight="600" text-anchor="middle" fill="#1a1a1a">Final Report</text>

                <!-- ========== EXTERNAL SERVICE QUERIES (DASHED ARROWS) ========== -->
                
                <!-- RAG â†’ CARD Database: Route ABOVE all boxes -->
                <path d="M 535 260 L 535 230 L 1150 230 L 1150 260" stroke="#666" stroke-width="2" stroke-dasharray="8,4" fill="none" marker-end="url(#arrowDashed5)"/>
                <text x="840" y="222" font-size="10" fill="#444">ARO ID Query</text>

                <!-- CARD Database â†’ RAG: Route BELOW top row -->
                <path d="M 1150 360 L 1150 385 L 535 385 L 535 360" stroke="#666" stroke-width="2" stroke-dasharray="8,4" fill="none" marker-end="url(#arrowDashed5)"/>
                <text x="840" y="400" font-size="10" fill="#444">Mechanism &amp; Drug Class</text>

                <!-- LLM Reasoning â†’ LLM Provider: Route in gap between rows -->
                <path d="M 350 460 L 350 425 L 1150 425 L 1150 460" stroke="#666" stroke-width="2" stroke-dasharray="8,4" fill="none" marker-end="url(#arrowDashed5)"/>
                <text x="790" y="417" font-size="10" fill="#444">Send Prompt</text>

                <!-- LLM Provider â†’ LLM Reasoning: Route BELOW bottom row -->
                <path d="M 1150 560 L 1150 590 L 335 590 L 335 560" stroke="#666" stroke-width="2" stroke-dasharray="8,4" fill="none" marker-end="url(#arrowDashed5)"/>
                <text x="740" y="605" font-size="10" fill="#444">Validation Decision &amp; Explanation</text>

                <!-- ========== LEGEND SECTION ========== -->
                <line x1="60" y1="660" x2="1270" y2="660" stroke="#ccc" stroke-width="1"/>
                
                <text x="60" y="695" font-size="13" font-weight="700" fill="#000">Legend:</text>

                <!-- Row 1 -->
                <line x1="60" y1="725" x2="110" y2="725" stroke="#1a1a1a" stroke-width="2.5" marker-end="url(#arrowSolid5)" fill="none"/>
                <text x="125" y="730" font-size="11" fill="#1a1a1a">Primary Data Flow</text>

                <rect x="350" y="715" width="20" height="20" rx="3" fill="white" stroke="#1a1a1a" stroke-width="1.5"/>
                <text x="380" y="730" font-size="11" fill="#1a1a1a">Backend Component</text>

                <!-- Row 2 -->
                <line x1="60" y1="760" x2="110" y2="760" stroke="#666" stroke-dasharray="8,4" stroke-width="2" fill="none"/>
                <text x="125" y="765" font-size="11" fill="#1a1a1a">External Service Query</text>

                <rect x="350" y="750" width="20" height="20" rx="3" fill="#a0a0a0" stroke="#1a1a1a" stroke-width="1.5"/>
                <text x="380" y="765" font-size="11" fill="#1a1a1a">External System</text>

                <!-- Flow Description -->
                <text x="600" y="680" font-size="10" fill="#555">Data Flow: FASTA â†’ Backend â†’ Alignment â†’ CARD Retrieval â†’ Prompt Engineering</text>
                <text x="600" y="700" font-size="10" fill="#555">â†’ LLM Provider â†’ Validation Result â†’ Report Generation â†’ UI</text>
            </svg>
        </div>
    </div>

    <!-- Footer -->
    <div style="margin-top: 50px; padding-top: 20px; border-top: 1px solid #d0d0d0; text-align: center; font-size: 11px; color: #888;">
        <p>LLM-Driven ARG Framework | Final Year Design Project | January 2026</p>
        <p>Professional Academic Diagrams for Thesis Submission</p>
    </div>
</body>
</html>
